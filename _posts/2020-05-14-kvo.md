---
comments: true
title: Swift ) KVO(Key-Value Observing)
key: 202005141
modify_date: 2020-05-14
picture_frame: shadow
tags:
  - [swift]
---
 
## KVO(Key-Value Observing)
 
KVO란 **특정 키의 값의 변화를 감지하는 기능**으로, 변경사항을 다른 객체에 알리기 위해 사용하는 **코코아 프로그래밍 패턴**이다.   
예를 들어, Model 객체의 어떤 값이 변경되었을 경우 이를 UI에 반영하기 위해 Controller 객체는 Model 객체에 **observing을 적용시켜 delegate에 특정 메시지를 보내 변경사항을 알리고 처리**할 수 있다.   
 
 
observing을 적용시키는 방법은 변수에 코드를 추가해 변수의 값이 변경될 때마다 코드가 실행되도록 하는 방법인데, 프로퍼티 옵저버(willSet, didSet)와 유사하다.   
 
 
또한 KVO는 **Objective-C 런타임에 의존**하고 있기 때문에 순수한 swift 코드에선 그리 좋지 않다.   
때문에 NSObject를 상속받으려면 `@objc` 키워드를 반드시 붙여줘야 하고, 특히 KVO는 프로퍼티 각각에 `@objc dynamic` 키워드를 붙여줘야 한다.   
 
> 👀 **dynamic이란?**
> dynamic은 objective-c 문법의 하나로, 특정 method나 function의 구현을 objective-c 런타임에서 하겠다고 명시하는 것이다.
 
#### KVO 적용
 
```
class Student {
    var name: String
    
    init(name: String) {
        self.name = name
    }
}
```
만약 해당 클래스에서 `name` 프로퍼티의 값이 변경될 때마다 다른 객체에 알리고 싶다면 KVO를 이용하면 된다.
 
1. KVO를 이용할 타입은 `NSObect`를 상속해야 한다.
```
class Student: NSObject {
    var name: String
    
    init(name: String) {
        self.name = name
    }
}
```
 
2. observe하려는 프로퍼티에 `@objc dynamic` 키워드를 추가한다.
```
class Student: NSObject {
    @objc dynamic var name: String
    
    init(name: String) {
        self.name = name
    }
}
```
 
#### KVO 확인
 
```
var student = Student(name: "혜지")
 
student.observe()
```
 
#### Reference)
 
[https://zeddios.tistory.com/1220](https://zeddios.tistory.com/1220)
